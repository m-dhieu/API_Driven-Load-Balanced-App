<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Job Application Tracker Dashboard</title>
  <link rel="stylesheet" href="css/dashboard.css" />
</head>
<body>
  <div class="dashboard-container">
    <aside class="sidebar">
      <div class="sidebar-title">JOB APPLICATION TRACKER</div>
      <nav>
        <ul>
          <li id="nav-dashboard" class="active"><span class="icon">üè†</span>Dashboard</li>
          <li id="nav-applications"><span class="icon">üìÑ</span>Applications</li>
          <li id="nav-job-search"><span class="icon">üîç</span>Job Search</li>
          <li id="nav-cv-review"><span class="icon">üìù</span>CV Review</li>
          <li id="nav-essay-review"><span class="icon">‚úçÔ∏è</span>Essay Review</li>
        </ul>
      </nav>
    </aside>
    <main class="main-content">
      <!-- Dashboard Sections -->
      <section id="dashboard-section">
        <div class="dashboard-header">
          <h2>Dashboard</h2>
          <div class="header-actions">
            <button id="logout-btn" class="logout-btn" onclick="logout()">üö™ Logout</button>
            <button class="menu-btn">&#9776;</button>
          </div>
        </div>
        <div class="stats-cards">
          <div class="stat-card">
            <div class="stat-title">Applications Applied</div>
            <div class="stat-value" id="applied-count">12</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Interviews</div>
            <div class="stat-value" id="interview-count">3</div>
          </div>
          <div class="stat-card">
            <div class="stat-title">Offers</div>
            <div class="stat-value" id="offer-count">1</div>
          </div>
        </div>
        <div class="applications-section">
          <div class="applications-header">
            <h3>Recent Job Opportunities</h3>
            <button class="filter-btn" onclick="toggleFilterPanel()">Filter ‚ñæ</button>
          </div>

          <!-- Filter Panel -->
          <div id="filter-panel" style="display: none; background: #f7faff; padding: 16px; border-radius: 8px; margin-bottom: 16px; border: 1px solid #e6f0fa;">
            <div style="display: flex; gap: 16px; align-items: center; flex-wrap: wrap;">
              <div style="flex: 1; min-width: 200px;">
                <label for="job-keyword-filter" style="display: block; margin-bottom: 4px; color: #6b7a90; font-size: 0.9rem;">üîç Keyword (title, company):</label>
                <input type="text" id="job-keyword-filter" placeholder="e.g., Engineer, Developer" style="width: 100%; padding: 8px 12px; border: 1px solid #e6f0fa; border-radius: 6px; font-size: 0.9rem; box-sizing: border-box;">
              </div>
              <div style="flex: 1; min-width: 150px;">
                <label for="job-status-filter" style="display: block; margin-bottom: 4px; color: #6b7a90; font-size: 0.9rem;">üìä Status:</label>
                <select id="job-status-filter" style="width: 100%; padding: 8px 12px; border: 1px solid #e6f0fa; border-radius: 6px; font-size: 0.9rem; box-sizing: border-box;">
                  <option value="">All Statuses</option>
                  <option value="Available">Available</option>
                  <option value="New Posting">New Posting</option>
                  <option value="Hot">Hot</option>
                  <option value="Remote Available">Remote Available</option>
                  <option value="Trending">Trending</option>
                </select>
              </div>
              <div style="align-self: end;">
                <button onclick="applyJobFilters()" style="background: #4a90e2; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; margin-right: 8px;">Apply</button>
                <button onclick="clearJobFilters()" style="background: #6b7a90; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 0.9rem;">Clear</button>
              </div>
            </div>
          </div>

          <table class="applications-table">
            <thead>
              <tr>
                <th>Company</th>
                <th>Job Title</th>
                <th>Status</th>
                <th>Posted Date</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="applications-body">
              <tr>
                <td><strong>Company A</strong></td>
                <td>Software Engineer</td>
                <td>Applied</td>
                <td>04/25/2024</td>
                <td class="arrow">&gt;</td>
              </tr>
              <tr>
                <td><strong>Company B</strong></td>
                <td>Product Manager</td>
                <td>Interview</td>
                <td>04/19/2024</td>
                <td class="arrow">&gt;</td>
              </tr>
              <tr>
                <td><strong>Company C</strong></td>
                <td>Data Analyst</td>
                <td>Offer</td>
                <td>04/16/2024</td>
                <td class="arrow">&gt;</td>
              </tr>
              <tr>
                <td><strong>Company D</strong></td>
                <td>UK Designer</td>
                <td>Rejected</td>
                <td>04/10/2024</td>
                <td class="arrow">&gt;</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- Job Search Section -->
      <section id="job-search-section" style="display:none; padding: 20px; background:#fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(24,49,83,0.07);">
        <h3>Job Search</h3>
        <div style="margin-bottom: 15px;">
          <label for="filter-keyword">Keyword:</label>
          <input type="text" id="filter-keyword" placeholder="e.g., Engineer" />
          <label for="filter-location" style="margin-left: 15px;">Location:</label>
          <input type="text" id="filter-location" placeholder="e.g., Remote or City" />
          <label for="sort-order" style="margin-left: 15px;">Sort by:</label>
          <select id="sort-order">
            <option value="relevance">Relevance</option>
            <option value="date_desc">Date (Newest)</option>
            <option value="date_asc">Date (Oldest)</option>
          </select>
          <button id="search-jobs-btn" style="margin-left: 15px; padding: 5px 12px;">Search</button>
        </div>
        <div id="job-search-results" style="max-height: 400px; overflow-y: auto; border: 1px solid #ccc; padding: 10px; border-radius: 8px;">
          <p>Enter search criteria and click "Search" to load jobs.</p>
        </div>
      </section>

      <!-- CV Review Section -->
      <section id="cv-review-section" style="display:none; padding: 20px; background:#fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(24,49,83,0.07);">
        <h3>CV Review</h3>
        <input type="file" id="cv-file-input" accept=".pdf,.doc,.docx,.txt" />
        <button id="upload-cv-btn" style="margin-top: 10px; padding: 8px 16px;">Upload & Review CV</button>
        <pre id="cv-review-result" style="margin-top: 20px; background: #eef3fb; padding: 12px; border-radius: 8px; white-space: pre-wrap;"></pre>
      </section>

      <!-- Essay Review Section -->
      <section id="essay-review-section" style="display:none; padding: 20px; background:#fff; border-radius: 12px; box-shadow: 0 2px 12px rgba(24,49,83,0.07);">
        <h3>Essay / Cover Letter Review</h3>
        <p>Paste your essay below or upload a .txt file:</p>
        <textarea id="essay-text" rows="10" style="width:100%; padding:10px; font-family: monospace;" placeholder="Paste your essay or cover letter here..."></textarea>
        <div style="margin-top: 10px;">
          <input type="file" id="essay-file-input" accept=".txt" />
        </div>
        <button id="review-essay-btn" style="margin-top: 15px; padding: 10px 20px; cursor:pointer;">Review Essay</button>
        <div id="review-results" style="margin-top: 20px; font-family: Arial, sans-serif; white-space: pre-wrap;"></div>
      </section>
    </main>
  </div>

  <!-- Job Details Modal -->
  <div id="job-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 16px; max-width: 600px; width: 90%; max-height: 80%; overflow-y: auto; box-shadow: 0 8px 32px rgba(24,49,83,0.2);">
      <div style="padding: 24px; border-bottom: 1px solid #e6f0fa;">
        <div style="display: flex; justify-content: between; align-items: flex-start;">
          <div style="flex: 1;">
            <h2 id="modal-job-title" style="margin: 0 0 8px 0; color: #183153; font-size: 1.5rem;"></h2>
            <p id="modal-company-name" style="margin: 0; color: #4a90e2; font-size: 1.1rem; font-weight: 600;"></p>
          </div>
          <button onclick="closeJobModal()" style="background: none; border: none; font-size: 1.5rem; color: #6b7a90; cursor: pointer; padding: 0; margin-left: 16px;">√ó</button>
        </div>
      </div>

      <div style="padding: 24px;">
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 16px; margin-bottom: 24px; padding: 16px; background: #f7faff; border-radius: 8px;">
          <div style="text-align: center;">
            <div style="color: #6b7a90; font-size: 0.9rem; margin-bottom: 4px;">Employment</div>
            <div id="modal-employment-type" style="font-weight: bold; color: #183153;"></div>
          </div>
          <div style="text-align: center;">
            <div style="color: #6b7a90; font-size: 0.9rem; margin-bottom: 4px;">Salary</div>
            <div id="modal-salary" style="font-weight: bold; color: #183153;"></div>
          </div>
          <div style="text-align: center;">
            <div style="color: #6b7a90; font-size: 0.9rem; margin-bottom: 4px;">Status</div>
            <div id="modal-status" style="font-weight: bold; color: #4a90e2;"></div>
          </div>
        </div>

        <div style="margin-bottom: 24px;">
          <h3 style="color: #183153; margin: 0 0 12px 0; font-size: 1.1rem;">Job Description</h3>
          <div id="modal-description" style="color: #6b7a90; line-height: 1.6; background: #f7faff; padding: 16px; border-radius: 8px; max-height: 200px; overflow-y: auto;"></div>
        </div>

        <div style="margin-bottom: 24px;" id="modal-categories-section">
          <h3 style="color: #183153; margin: 0 0 12px 0; font-size: 1.1rem;">Categories</h3>
          <div id="modal-categories" style="display: flex; flex-wrap: wrap; gap: 8px;"></div>
        </div>

        <div style="display: flex; gap: 12px; justify-content: flex-end;">
          <button onclick="closeJobModal()" style="background: #6b7a90; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 1rem;">Close</button>
          <button id="modal-apply-btn" onclick="applyToJob()" style="background: linear-gradient(135deg, #4a90e2, #357abd); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 1rem; font-weight: 600; box-shadow: 0 4px 12px rgba(74, 144, 226, 0.3);">Apply Now üöÄ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Resources Modal -->
  <div id="resources-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; border-radius: 16px; max-width: 700px; width: 90%; max-height: 80%; overflow-y: auto; box-shadow: 0 8px 32px rgba(24,49,83,0.2);">
      <div style="padding: 24px; border-bottom: 1px solid #e6f0fa;">
        <div style="display: flex; justify-content: space-between; align-items: center;">
          <h2 style="margin: 0; color: #183153; font-size: 1.5rem;">üìö Learning Resources</h2>
          <button onclick="closeResourcesModal()" style="background: none; border: none; font-size: 1.5rem; color: #6b7a90; cursor: pointer; padding: 0;">√ó</button>
        </div>
        <p id="resources-job-title" style="margin: 8px 0 0 0; color: #4a90e2; font-size: 1rem;"></p>
      </div>

      <div style="padding: 24px;">
        <div id="resources-loading" style="text-align: center; padding: 20px; display: none;">
          <div style="color: #6b7a90;">Loading skills and resources...</div>
        </div>

        <div id="resources-content">
          <div style="margin-bottom: 24px;">
            <h3 style="color: #183153; margin: 0 0 12px 0; font-size: 1.1rem;">üéØ Required Skills</h3>
            <div id="skills-container" style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;"></div>
          </div>

          <div>
            <h3 style="color: #183153; margin: 0 0 12px 0; font-size: 1.1rem;">üîó Learning Resources</h3>
            <div id="resources-container" style="display: flex; flex-direction: column; gap: 12px;"></div>
          </div>
        </div>

        <div style="display: flex; gap: 12px; justify-content: flex-end; margin-top: 24px; border-top: 1px solid #e6f0fa; padding-top: 20px;">
          <button onclick="closeResourcesModal()" style="background: #6b7a90; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 1rem;">Close</button>
        </div>
      </div>
    </div>
  </div>

  <script src="js/dashboard.js"></script>
</body>
</html>
